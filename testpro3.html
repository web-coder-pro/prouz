<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>B1 English Test</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    body {
        font-family: Arial, sans-serif;
        background: #f9f9f9;
        margin: 0;
        padding: 0;
        text-align: center;
    }

    h2 {
        margin-top: 20px;
    }

    #startBtn, button {
        padding: 12px 25px;
        font-size: 18px;
        border: none;
        background: #4CAF50;
        color: white;
        border-radius: 8px;
        cursor: pointer;
    }

    #startBtn {
        margin-top: 25px;
    }

    .question {
        display: none;
        background: #fff;
        padding: 20px;
        margin: 20px auto;
        width: 90%;
        max-width: 500px;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        text-align: left;
    }

    .options div {
        background: #ececec;
        padding: 12px;
        margin: 10px 0;
        border-radius: 8px;
        cursor: pointer;
        transition: 0.3s;
    }

    .options div:hover {
        background: #d5d5d5;
    }

    .selected {
        background: #90caf9 !important;
    }

    .buttons {
        margin-top: 20px;
        text-align: center;
    }

    button:disabled {
        background: #aaa;
    }

    #resultBox {
        display: none;
        background: white;
        width: 90%;
        max-width: 450px;
        padding: 20px;
        margin: 40px auto;
        border-radius: 12px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.15);
    }

</style>
</head>
<body>

<h2>B1 English Test</h2>
<button id="startBtn">Start Test</button>

<div id="questionsContainer"></div>

<div id="resultBox">
    <h2>Natija</h2>
    <p id="correctCount"></p>
    <p id="wrongCount"></p>
    <button onclick="restart()">Qayta boshlash</button>
    <button onclick="window.location.href='englishlevel.html'">Darajaga qaytish</button>
</div>

<script>
// ===================== B1 TESTLAR ARRAYI =====================

const tests = [
    {q:"She didn’t come to the meeting, ______ she had a doctor’s appointment.", o:["unless","because","although"], a:1},
    {q:"I will call you as soon as I ______ the news.", o:["heard","hear","will hear"], a:1},
    {q:"If I were you, I ______ talk to him.", o:["would","will","can"], a:0},
    {q:"The film wasn’t very interesting, ______ we left early.", o:["although","so","but"], a:1},
    {q:"They refused ______ the rules.", o:["follow","to follow","following"], a:1},
    {q:"I’m not used ______ up so early.", o:["getting","to get","get"], a:0},
    {q:"By the time we arrived, the show ______.", o:["has already started","had already started","already started"], a:1},
    {q:"Could you tell me where ______?", o:["is the nearest bank","nearest bank is","the nearest bank is"], a:2},
    {q:"He apologized ______ late.", o:["to be","for being","to being"], a:1},
    {q:"My sister has lived in Germany ______ she was 12.", o:["since","for","from"], a:0},
    {q:"I didn’t expect the test to be ______ difficult.", o:["such","too","so"], a:2},
    {q:"We should leave now; otherwise, we ______ the bus.", o:["miss","will miss","are missing"], a:1},
    {q:"I haven’t decided ______ to go on vacation.", o:["why","what","where"], a:2},
    {q:"This is the restaurant ______ they serve the best pasta.", o:["which","where is","who"], a:0},
    {q:"I regret ______ him about the problem.", o:["telling","told","to tell"], a:0},
];

let selectedAnswers = new Array(tests.length).fill(null);

const container = document.getElementById("questionsContainer");


// ===================== SAVOLLARNI CHIZISH =====================

tests.forEach((t, i) => {
    let div = document.createElement("div");
    div.className = "question";
    div.id = "q" + i;

    div.innerHTML = `
        <h3>${i+1}. ${t.q}</h3>
        <div class="options">
            ${t.o.map((opt, idx)=>`
                <div onclick="selectOption(${i}, ${idx}, this)">${opt}</div>
            `).join("")}
        </div>

        <div class="buttons">
            <button onclick="prev(${i})" ${i===0?"disabled":""}>Orqaga</button>
            ${
                i === tests.length - 1
                ? `<button onclick="finish()">Tugatish</button>`
                : `<button onclick="next(${i})">Keyingisi</button>`
            }
        </div>
    `;

    container.appendChild(div);
});


// ===================== Variant tanlash =====================

function selectOption(qIndex, optIndex, element) {
    selectedAnswers[qIndex] = optIndex;

    const optionsDiv = element.parentNode.querySelectorAll("div");
    optionsDiv.forEach(o => o.classList.remove("selected"));

    element.classList.add("selected");
}


// ===================== Navigatsiya =====================

document.getElementById("startBtn").onclick = () => {
    document.getElementById("q0").style.display = "block";
    document.getElementById("startBtn").style.display = "none";
};

function next(i){
    document.getElementById("q"+i).style.display="none";
    document.getElementById("q"+(i+1)).style.display="block";
}

function prev(i){
    document.getElementById("q"+i).style.display="none";
    document.getElementById("q"+(i-1)).style.display="block";
}


// ===================== TESTNI TUGATISH =====================

function finish() {
    let correct = 0;
    let wrong = 0;

    selectedAnswers.forEach((ans, idx) => {
        if (ans === tests[idx].a) correct++;
        else wrong++;
    });

    document.getElementById("correctCount").innerText = "To‘g‘ri javoblar: " + correct;
    document.getElementById("wrongCount").innerText = "Xato javoblar: " + wrong;

    document.querySelectorAll(".question").forEach(q => q.style.display = "none");
    document.getElementById("resultBox").style.display = "block";
}


// ===================== Qayta boshlash =====================

function restart() {
    selectedAnswers.fill(null);

    document.querySelectorAll(".question .options div").forEach(d =>
        d.classList.remove("selected")
    );

    document.getElementById("resultBox").style.display = "none";
    document.getElementById("q0").style.display = "block";
}
</script>

</body>
</html>
