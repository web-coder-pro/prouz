<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>A2 English Test</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    body {
        font-family: Arial, sans-serif;
        background: #f9f9f9;
        margin: 0;
        padding: 0;
        text-align: center;
    }

    h2 {
        margin-top: 20px;
    }

    #startBtn, button {
        padding: 12px 25px;
        font-size: 18px;
        border: none;
        background: #4CAF50;
        color: white;
        border-radius: 8px;
        cursor: pointer;
    }

    #startBtn {
        margin-top: 25px;
    }

    .question {
        display: none;
        background: #fff;
        padding: 20px;
        margin: 20px auto;
        width: 90%;
        max-width: 500px;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        text-align: left;
    }

    .options div {
        background: #ececec;
        padding: 12px;
        margin: 10px 0;
        border-radius: 8px;
        cursor: pointer;
        transition: 0.3s;
    }

    .options div:hover {
        background: #d5d5d5;
    }

    .selected {
        background: #90caf9 !important;
    }

    .buttons {
        margin-top: 20px;
        text-align: center;
    }

    button:disabled {
        background: #aaa;
    }

    #resultBox {
        display: none;
        background: white;
        width: 90%;
        max-width: 450px;
        padding: 20px;
        margin: 40px auto;
        border-radius: 12px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.15);
    }

</style>
</head>
<body>

<h2>A2 English Test</h2>
<p>Test ishlashni istasangiz "Start Test" tugmasini bosing.</p>
<button id="startBtn">Start Test</button>

<div id="questionsContainer"></div>

<div id="resultBox">
    <h2>Natija</h2>
    <p id="correctCount"></p>
    <p id="wrongCount"></p>
    <button onclick="restart()">Qayta boshlash</button>
    <button onclick="window.location.href='englishlevel.html'">Darajaga qaytish</button>
</div>

<script>
// ===================== A2 TESTLAR ARRAYI =====================

const tests = [
    {q:"What does she usually do in the morning?", o:["She yesterday ran","She running now","She usually goes for a run"], a:2},
    {q:"Choose the correct sentence:", o:["I didn’t went to school","I don’t went to school","I didn’t go to school"], a:2},
    {q:"How long have you lived here?", o:["Since I am child","For 3 years","I live here 3 years"], a:1},
    {q:"They ______ lunch when I called them.", o:["have","were having","is having"], a:1},
    {q:"What does this word mean?", o:["It means “joyful”","It meaning happy","It mean joyful"], a:0},
    {q:"Choose the correct question:", o:["Where you are from?","Where are you from?","From where are you?"], a:1},
    {q:"I’m not sure, but it ______ rain later.", o:["maybe","was","could"], a:2},
    {q:"She is interested ___ learning French.", o:["at","in","on"], a:1},
    {q:"We have lived in this city ______ 2020.", o:["for","since","from"], a:1},
    {q:"If I ______ enough money, I will buy a new laptop.", o:["have","had","will have"], a:0},
    {q:"He speaks English very ______.", o:["well","best","good"], a:0},
    {q:"I haven’t finished the project ______.", o:["already","yet","just"], a:1},
    {q:"They were tired, ______ they stopped walking.", o:["although","but","so"], a:2},
    {q:"She asked me ______ I could help her.", o:["that","if","do"], a:1},
    {q:"I prefer coffee ______ tea.", o:["with","to","than"], a:1},
];

let selectedAnswers = new Array(tests.length).fill(null);

const container = document.getElementById("questionsContainer");


// ===================== SAVOLLARNI CHIZISH =====================

tests.forEach((t, i) => {
    let div = document.createElement("div");
    div.className = "question";
    div.id = "q" + i;

    div.innerHTML = `
        <h3>${i+1}. ${t.q}</h3>
        <div class="options">
            ${t.o.map((opt, idx)=>`
                <div onclick="selectOption(${i}, ${idx}, this)">${opt}</div>
            `).join("")}
        </div>

        <div class="buttons">
            <button onclick="prev(${i})" ${i===0?"disabled":""}>Orqaga</button>
            ${
                i === tests.length - 1
                ? `<button onclick="finish()">Tugatish</button>`
                : `<button onclick="next(${i})">Keyingisi</button>`
            }
        </div>
    `;

    container.appendChild(div);
});


// ===================== Variant tanlash =====================

function selectOption(qIndex, optIndex, element) {
    selectedAnswers[qIndex] = optIndex;

    const optionsDiv = element.parentNode.querySelectorAll("div");
    optionsDiv.forEach(o => o.classList.remove("selected"));

    element.classList.add("selected");
}


// ===================== Navigatsiya =====================

document.getElementById("startBtn").onclick = () => {
    document.getElementById("q0").style.display = "block";
    document.getElementById("startBtn").style.display = "none";
};

function next(i){
    document.getElementById("q"+i).style.display="none";
    document.getElementById("q"+(i+1)).style.display="block";
}

function prev(i){
    document.getElementById("q"+i).style.display="none";
    document.getElementById("q"+(i-1)).style.display="block";
}


// ===================== TESTNI TUGATISH =====================

function finish() {
    let correct = 0;
    let wrong = 0;

    selectedAnswers.forEach((ans, idx) => {
        if (ans === tests[idx].a) correct++;
        else wrong++;
    });

    document.getElementById("correctCount").innerText = "To‘g‘ri javoblar: " + correct;
    document.getElementById("wrongCount").innerText = "Xato javoblar: " + wrong;

    document.querySelectorAll(".question").forEach(q => q.style.display = "none");
    document.getElementById("resultBox").style.display = "block";
}


// ===================== Qayta boshlash =====================

function restart() {
    selectedAnswers.fill(null);

    document.querySelectorAll(".question .options div").forEach(d =>
        d.classList.remove("selected")
    );

    document.getElementById("resultBox").style.display = "none";
    document.getElementById("q0").style.display = "block";
}
</script>

</body>
</html>
